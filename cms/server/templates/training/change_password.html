{% extends base.html %}

{% block js_init %}
function getUrlParameter(sParam) {
   var sPageURL = $(location).attr('search').slice(1)
   var sURLVariables = sPageURL.split('&');
   for (var i = 0; i < sURLVariables.length; i++) {
       var sParameterName = sURLVariables[i].split('=');
       if (sParameterName[0] == sParam) {
           return sParameterName[1];
       }
   }
   return "";
}
var errMsg = getUrlParameter("error");

if (errMsg.length > 0) {
$(changepassalert).show();
$(changepassalert).html(decodeURIComponent(errMsg));
}
{% end %}

{% block title %}Change Password{% end %}

{% block head %}
<link rel="stylesheet" href="/static/css/flat-ui.css">
<link rel="stylesheet" href="/static/css/contestant_style.css">
{% end %}

{% block body %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css"/>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/js/bootstrapValidator.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#recoveryform').bootstrapValidator({
        message: 'This value is not valid',
        feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            password: {
                message: 'This password is not valid',
                validators: {
                    notEmpty: {
                        message: 'Passwords cannot be empty'
                    },
                    stringLength: {
                        min: 8,
                        max: 64,
                        message: 'Passwords must be at least 8, and no more than 64 characters long'
                    }
                }
            }
        }
    });
});
</script>
<div class="container">
	<div id="loginbox" style="margin-top:50px;" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
		<div class="panel panel-info" >
			<div class="panel-heading">
				<div class="panel-title">Change Password</div>
				<div style="float:right; font-size: 85%; position: relative; top:-10px"><a id="signinlink" href="/login">Sign In</a></div>
			</div>

			<div style="padding-top:30px" class="panel-body" >

				<div style="display:none" id="changepassalert" class="alert alert-danger col-sm-12"></div>

				<form id="recoveryform" class="form-horizontal" role="form" method="POST">
                    <div class="form-group required" style="margin-left: 0px; margin-right: 0px">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input id="verification" type="text" class="form-control" name="verification" value="" placeholder="verification">
                        </div>
                    </div>
                    <div class="form-group required" style="margin-left: 0px; margin-right: 0px">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input id="password" type="password" class="form-control" name="password" value="" placeholder="password">
                        </div>
                    </div>
					<div style="margin-top:10px" class="form-group">
						<div class="col-sm-12 controls">
							<input class="btn btn-success" type="submit" value="Change">
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
{% end %}
